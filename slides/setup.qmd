---
editor_options:
  chunk_output_type: console
---


```{r}
#| label: setup
#| output: false

library(tidyverse)
library(tidycensus)
library(usmap)

tprint <- 30
options(tibble.print_max = tprint, tibble.print_min = tprint) 

# library(ggpattern)

```


```{r}
#| label: constants
#| output: false

ddir <- here::here("data")
tdir <- fs::path(ddir, "acs_tables")

# examine geograhies to define areas to focus on
# geographies <- readRDS(fs::path(ddir, "acs_geographies.rds"))

nycos <- paste0("36", c("001", "083", "091", "093", "113", "115"))
vtcos <- "50003"
keep_cos <- c(nycos, vtcos)

keep_places <- c("3602550", "3611825", "3630675", "3664771", "3665750", "3635474")

keep_cousubs <- c("3611511836", "3611530686", "3611564782", "3611581578", "3609165244", "3611502561", "3608335463", "3611538143")
# geographies |> filter(geoid %in% keep_cousubs)

```


```{r}
#| label: functions
#| output: false

barline <- function(data, title, ylab, ybreaks, yint){
  data |> 
    ggplot(aes(x = reorder(trimname, estimate), y = estimate, fill = special)) +
    geom_col(width = 0.2) +
    scale_fill_manual(values = c("lightblue", "blue")) +
    geom_hline(yintercept = yint, color = "red", linetype = "solid", linewidth = .75) +
    scale_y_continuous(name=ylab, labels = scales::label_comma(),
                       breaks = ybreaks) +
    labs(title = title,
       subtitle = "2019-2023 American Community Survey",
       x = NULL) +
    theme_minimal() +
    theme(legend.position = "None")
}

```



```{r}
#| label: quarto-links
#| eval: false
#| output: false

# https://bookdown.org/yihui/rmarkdown-cookbook/reuse-chunks.html

```

